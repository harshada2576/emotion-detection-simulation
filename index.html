<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emotion Detection & Mental Health Assistant</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>🧠 Emotion Detection & Mental Health Assistant</h1>
            <p class="subtitle">Project #70: AI-Powered Emotional Support System</p>
        </header>

        <div class="main-content">
            <!-- Progress Tracking -->
            <div class="progress-section">
                <div class="progress-card">
                    <h3>📈 Your Progress</h3>
                    <div class="progress-stats">
                        <div class="stat">
                            <span class="stat-value" id="streakCount">0</span>
                            <span class="stat-label">Day Streak</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value" id="sessionCount">0</span>
                            <span class="stat-label">Sessions</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value" id="achievementCount">0</span>
                            <span class="stat-label">Achievements</span>
                        </div>
                    </div>
                    <div id="achievementsList" class="achievements-list"></div>
                </div>
            </div>

            <!-- Emotion Input Section -->
            <div class="input-section">
                <h2>How are you feeling today?</h2>
                
                <div class="input-methods">
                    <!-- Text Input -->
                    <div class="input-method">
                        <h3>💬 Describe your feelings</h3>
                        <textarea id="textInput" placeholder="Tell me how you're feeling today..."></textarea>
                        <button id="analyzeTextBtn" class="analyze-btn">Analyze Emotion</button>
                    </div>

                    <!-- Voice Input -->
                    <div class="input-method">
                        <h3>🎤 Speak your feelings</h3>
                        <div class="voice-controls">
                            <button id="startRecording" class="voice-btn">
                                🎤 Start Recording
                            </button>
                            <button id="stopRecording" class="voice-btn" disabled>
                                ⏹️ Stop Recording
                            </button>
                        </div>
                        <div id="voiceStatus" class="status">
                            Click "Start Recording" and speak about your feelings
                        </div>
                    </div>

                    <!-- Facial Expression -->
                    <div class="input-method">
                        <h3>😊 Select facial expression</h3>
                        <div class="facial-expressions">
                            <button class="emoji-btn" data-emotion="happy">😊 Happy</button>
                            <button class="emoji-btn" data-emotion="sad">😢 Sad</button>
                            <button class="emoji-btn" data-emotion="angry">😠 Angry</button>
                            <button class="emoji-btn" data-emotion="surprised">😲 Surprised</button>
                            <button class="emoji-btn" data-emotion="neutral">😐 Neutral</button>
                            <button class="emoji-btn" data-emotion="anxious">😰 Anxious</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Results Section -->
            <div class="results-section" id="resultsSection" style="display: none;">
                <h2>Emotion Analysis Results</h2>
                
                <div class="emotion-card">
                    <div class="emotion-header">
                        <span id="detectedEmoji" class="emotion-emoji">😊</span>
                        <div>
                            <h3 id="detectedEmotion">Happy</h3>
                            <p id="confidence">Confidence: 85%</p>
                        </div>
                    </div>
                    
                    <div class="emotional-breakdown">
                        <h4>Emotional Breakdown:</h4>
                        <div id="emotionChartContainer">
                            <canvas id="emotionChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- AI Response -->
                <div class="ai-response">
                    <h3>💭 Supportive Response</h3>
                    <div id="aiResponse" class="response-text">
                        Loading response...
                    </div>
                    <div class="suggestions">
                        <h4>💡 Suggestions for emotional well-being:</h4>
                        <ul id="suggestionsList"></ul>
                    </div>
                </div>
            </div>

            <!-- Mental Health Exercises -->
            <div class="exercises-section">
                <h2>🧘 Mental Health Exercises</h2>
                <div class="exercise-cards">
                    <div class="exercise-card" data-exercise="breathing">
                        <h4>🌬️ Breathing Exercise</h4>
                        <p>4-7-8 breathing technique for anxiety relief</p>
                        <button class="start-exercise">Start Exercise</button>
                    </div>
                    
                    <div class="exercise-card" data-exercise="meditation">
                        <h4>🧠 Quick Meditation</h4>
                        <p>5-minute mindfulness practice</p>
                        <button class="start-exercise">Start Exercise</button>
                    </div>
                    
                    <div class="exercise-card" data-exercise="journal">
                        <h4>📝 Guided Journaling</h4>
                        <p>Structured emotional reflection</p>
                        <button class="start-exercise">Start Exercise</button>
                    </div>
                </div>
                
                <div id="exerciseContainer" class="exercise-container" style="display: none;">
                    <div id="exerciseContent"></div>
                    <button id="stopExercise" class="stop-exercise-btn">Stop Exercise</button>
                </div>
            </div>

            <!-- Analytics Dashboard -->
            <div class="analytics-section">
                <h2>📊 Emotional Trends & Analytics</h2>
                <div class="analytics-cards">
                    <div class="analytics-card">
                        <h4>Weekly Mood Distribution</h4>
                        <canvas id="moodChart"></canvas>
                    </div>
                    <div class="analytics-card">
                        <h4>Emotion Frequency</h4>
                        <div id="emotionFrequency" class="frequency-list">
                            <div class="frequency-item">
                                <span>No data yet</span>
                                <span>0 times</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="trends-card">
                    <h4>📈 Emotional Trends Over Time</h4>
                    <canvas id="trendsChart"></canvas>
                </div>

                <div class="community-insights">
                    <h4>👥 Community Insights</h4>
                    <div id="communityMessage" class="community-message">
                        You're not alone in your emotional journey. Many people find comfort in daily check-ins.
                    </div>
                </div>

                <button id="generateReportBtn" class="report-btn">📄 Generate RPA Report</button>
                <div id="reportOutput" class="report-output"></div>
            </div>
        </div>

        <!-- Session Info -->
        <div class="session-info">
            <p><strong>Session started:</strong> <span id="sessionTime">Loading...</span></p>
            <p><strong>Interactions:</strong> <span id="interactionCount">0</span></p>
            <p><strong>Current Streak:</strong> <span id="currentStreak">0 days</span></p>
            <button id="resetSessionBtn" class="reset-btn">🔄 Reset Session</button>
        </div>
    </div>

    <script src="emotion-detector.js"></script>
    <script src="interaction-engine.js"></script>
    <script src="analytics.js"></script>
    <script src="script.js"></script>
</body>
</html>